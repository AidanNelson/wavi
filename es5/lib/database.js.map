{"version":3,"sources":["../../src/lib/database.js"],"names":["_","require","parsersHelper","db","module","exports","classes","relations","count","addProperty","classId","property","name","removeSpecialChar","reduceLength","undefined","value","prop","visibility","type","properties","push","addMethod","method","methods","addClass","myClass","key","fill","setClass","newClass","extend","addRelations","rel","getClass","getClasses","getRelations","setIdentifiedFiles","identifiedFiles","getIdentifiedFiles"],"mappings":";;AAAA,IAAIA,IAAIC,QAAQ,YAAR,EAAsBD,CAA9B;AACA,IAAIE,gBAAgBD,QAAQ,wBAAR,CAApB;;AAEA,IAAIE,KAAKC,OAAOC,OAAP,GAAiB;AAClBC,iBAAS,EADS;AAElBC,mBAAW,EAFO;AAGlBC,eAAO,CAHW;AAIlBC,qBAAa,qBAAUC,OAAV,EAAmBC,QAAnB,EAA6B;AAClCA,yBAASC,IAAT,GAAgBV,cAAcW,iBAAd,CAAgCF,SAASC,IAAzC,CAAhB;AACAD,yBAASC,IAAT,GAAgBV,cAAcY,YAAd,CAA2BH,SAASC,IAApC,EAA0C,EAA1C,CAAhB;AACA,oBAAIF,YAAYK,SAAZ,IAAyBJ,SAASC,IAAT,KAAkBG,SAA3C,IAAwDJ,SAASC,IAAT,KAAkB,EAA9E,EAAkF;AAC1ED,iCAASK,KAAT,GAAiBd,cAAcW,iBAAd,CAAgCX,cAAcY,YAAd,CAA2BH,SAASK,KAApC,EAA2C,EAA3C,CAAhC,CAAjB;AACA,4BAAIC,OAAON,SAASO,UAAT,GAAsBP,SAASC,IAA1C;AACA,4BAAID,SAASQ,IAAT,KAAkB,IAAlB,IAA0BR,SAASQ,IAAT,KAAkB,EAA5C,IAAkDR,SAASQ,IAAT,KAAkB,WAAxE,EAAqF;AAC7EF,wCAAQ,QAAQN,SAASQ,IAAzB;AACP;AACD,4BAAIR,SAASK,KAAT,KAAmB,IAAnB,IAA2BL,SAASK,KAAT,KAAmB,EAA9C,IAAoDL,SAASK,KAAT,KAAmBD,SAAvE,IAAoFJ,SAASK,KAAT,KAAmB,MAA3G,EAAmH;AAC3GC,wCAAQ,QAAQN,SAASK,KAAzB;AACP;AACDb,2BAAGG,OAAH,CAAWI,OAAX,EAAoBU,UAApB,CAA+BC,IAA/B,CAAoCJ,IAApC;AACP;AACR,SAlBiB;AAmBlBK,mBAAW,mBAAUZ,OAAV,EAAmBa,MAAnB,EAA2B;AAC9B,oBAAIb,YAAYK,SAAhB,EAA2B;AACnBQ,+BAAOX,IAAP,GAAcV,cAAcW,iBAAd,CAAgCX,cAAcY,YAAd,CAA2BS,OAAOX,IAAlC,EAAwC,EAAxC,CAAhC,CAAd;AACAW,+BAAOP,KAAP,GAAed,cAAcW,iBAAd,CAAgCX,cAAcY,YAAd,CAA2BS,OAAOP,KAAlC,EAAyC,EAAzC,CAAhC,CAAf;AACAb,2BAAGG,OAAH,CAAWI,OAAX,EAAoBc,OAApB,CAA4BH,IAA5B,CAAiCE,OAAOL,UAAP,GAAoBK,OAAOX,IAA3B,GAAkC,GAAlC,GAAwCW,OAAOP,KAA/C,GAAuD,GAAxF;AACP;AACR,SAzBiB;AA0BlBS,kBAAU,kBAAUC,OAAV,EAAmB;AACrBA,wBAAQC,GAAR,GAAcxB,GAAGK,KAAjB;AACA,oBAAIkB,QAAQE,IAAR,KAAiB,IAAjB,IAAyBF,QAAQE,IAAR,KAAiBb,SAA9C,EAAyD;AACjDW,gCAAQE,IAAR,GAAe,aAAf;AACP;AACDF,wBAAQN,UAAR,GAAqB,EAArB;AACAM,wBAAQF,OAAR,GAAkB,EAAlB;AACArB,mBAAGK,KAAH;AACAL,mBAAGG,OAAH,CAAWe,IAAX,CAAgBK,OAAhB;AACA,uBAAOvB,GAAGK,KAAH,GAAW,CAAlB;AACP,SApCiB;AAqClBqB,kBAAU,kBAAUF,GAAV,EAAeG,QAAf,EAAyB;AAC3B3B,mBAAGG,OAAH,CAAWqB,GAAX,IAAkB3B,EAAE+B,MAAF,CAAS5B,GAAGG,OAAH,CAAWqB,GAAX,CAAT,EAA0BG,QAA1B,CAAlB;AACP,SAvCiB;AAwClBE,sBAAc,sBAAUC,GAAV,EAAe;AACrB9B,mBAAGI,SAAH,CAAac,IAAb,CAAkBY,GAAlB;AACP,SA1CiB;AA2ClBC,kBAAU,kBAAUxB,OAAV,EAAmB;AACrB,uBAAOP,GAAGG,OAAH,CAAWI,OAAX,CAAP;AACP,SA7CiB;AA8ClByB,oBAAY,sBAAY;AAChB,uBAAOhC,GAAGG,OAAV;AACP,SAhDiB;AAiDlB8B,oBAjDkB,0BAiDH;AACP,uBAAOjC,GAAGI,SAAV;AACP,SAnDiB;;;AAqDlB8B,4BAAoB,4BAAUC,eAAV,EAA2B;AACvCnC,mBAAGmC,eAAH,GAAqBA,eAArB;AACP,SAvDiB;AAwDlBC,4BAAoB,8BAAY;AACxB,uBAAOpC,GAAGmC,eAAV;AACP;AA1DiB,CAA1B","file":"database.js","sourcesContent":["var _ = require('underscore')._;\nvar parsersHelper = require(\"../utils/parsersHelper\");\n\nvar db = module.exports = {\n        classes: [],\n        relations: [],\n        count: 0,\n        addProperty: function (classId, property) {\n                property.name = parsersHelper.removeSpecialChar(property.name);\n                property.name = parsersHelper.reduceLength(property.name, 30)\n                if (classId !== undefined && property.name !== undefined && property.name !== \"\") {\n                        property.value = parsersHelper.removeSpecialChar(parsersHelper.reduceLength(property.value, 30));\n                        let prop = property.visibility + property.name;\n                        if (property.type !== null && property.type !== \"\" && property.type !== \"undefined\") {\n                                prop += \" : \" + property.type;\n                        }\n                        if (property.value !== null && property.value !== \"\" && property.value !== undefined && property.value !== \"null\") {\n                                prop += \" = \" + property.value;\n                        }\n                        db.classes[classId].properties.push(prop);\n                }\n        },\n        addMethod: function (classId, method) {\n                if (classId !== undefined) {\n                        method.name = parsersHelper.removeSpecialChar(parsersHelper.reduceLength(method.name, 30));\n                        method.value = parsersHelper.removeSpecialChar(parsersHelper.reduceLength(method.value, 30));\n                        db.classes[classId].methods.push(method.visibility + method.name + \"(\" + method.value + \")\");\n                }\n        },\n        addClass: function (myClass) {\n                myClass.key = db.count;\n                if (myClass.fill === null || myClass.fill === undefined) {\n                        myClass.fill = \"lightyellow\";\n                }\n                myClass.properties = [];\n                myClass.methods = [];\n                db.count++;\n                db.classes.push(myClass);\n                return db.count - 1;\n        },\n        setClass: function (key, newClass) {\n                db.classes[key] = _.extend(db.classes[key], newClass);\n        },\n        addRelations: function (rel) {\n                db.relations.push(rel);\n        },\n        getClass: function (classId) {\n                return db.classes[classId];\n        },\n        getClasses: function () {\n                return db.classes;\n        },\n        getRelations() {\n                return db.relations;\n        },\n\n        setIdentifiedFiles: function (identifiedFiles) {\n                db.identifiedFiles = identifiedFiles;\n        },\n        getIdentifiedFiles: function () {\n                return db.identifiedFiles;\n        }\n}"]}