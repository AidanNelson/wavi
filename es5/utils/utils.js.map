{"version":3,"sources":["../../src/utils/utils.js"],"names":["require","_","async","scan","fs","path","parsersHelper","utils","module","exports","counter","start","getCount","counterName","isUndefined","startTimer","Date","getTime","stopTimer","end","time","console","log","read","Promise","resolve","reject","readFile","error","data","writefile","file","buffer","writeFile","err","read_node","node","name","correctPathSync","filePath","parent","extension","folder","match","mixedPath","normalize","replace","substr","length","undefined","append","text","appendFileSync","scanFiles","website_folder","filter","fileList","escapeHTML","chr","abc","a"],"mappings":"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","file":"utils.js","sourcesContent":["require(\"babel-polyfill\");\nvar _ = require('underscore')._;\nvar async = require(\"async\");\nvar scan = require(\"./scan\");\nvar fs = require(\"fs\");\nvar path = require('path');\nvar parsersHelper = require(\"./parsersHelper\");\n\n\nvar utils = module.exports = {\n        counter: {},\n        start: 0,\n        getCount: function (counterName) {\n                if (_.isUndefined(parsersHelper.counter[counterName])) {\n                        parsersHelper.counter[counterName] = 1;\n                }\n                else {\n                        parsersHelper.counter[counterName]++;\n                }\n                return counterName + \">\" + parsersHelper.counter[counterName];\n        },\n        startTimer: function () {\n                utils.start = new Date().getTime();\n        },\n        stopTimer: function () {\n                var end = new Date().getTime();\n                var time = end - utils.start;\n                console.log('Execution time: ' + time / 1000);\n        },\n        read: function (path) {\n                return new Promise(\n                        function (resolve, reject) {\n                                fs.readFile(path, \"utf-8\", function (error, data) {\n                                        resolve([path, data]);\n                                })\n                        });\n        },\n        writefile: function (file) {\n\n                return function (buffer) {\n                        return new Promise(function (resolve, reject) {\n                                fs.writeFile(file, buffer, function (err) {\n                                        if (err) reject(err)\n                                        else resolve()\n                                })\n                        })\n                }\n        },\n        read_node: function (node) {\n                return new Promise(\n                        function (resolve, reject) {\n                                fs.readFile(node.name, \"utf-8\", function (error, data) {\n                                        resolve([node, data]);\n                                })\n                        });\n        },\n        correctPathSync: function (filePath, parent, extension) {\n                let folder = parent.match(/(.*)[\\/\\\\]/)[1] || '';\n                var mixedPath = path.normalize(folder + \"/\" + filePath);\n                mixedPath = mixedPath.replace(/\\\\/g, \"\\/\").replace(\"//\", \"/\");\n                if (extension && mixedPath.substr(mixedPath.length - extension.length) !== extension) {\n                        mixedPath = mixedPath + extension;\n                }\n                return mixedPath;\n\n        },\n        normalize: function (filePath, folder) {\n                if (folder === undefined) {\n                        folder = \"\";\n                }\n                else{\n                       folder =  folder + \"/\"\n                }\n                var mixedPath = path.normalize(folder + filePath);\n                mixedPath = mixedPath.replace(/\\\\/g, \"\\/\").replace(\"//\", \"/\");\n                return mixedPath;\n\n        },\n        append: function (file, text) {\n                fs.appendFileSync(file, text + \"\\n\");\n        },\n        scanFiles: function (website_folder, filter) {\n                return new Promise(function (resolve, reject) {\n                        scan(website_folder, filter, false, function (err, fileList) {\n                                if (err) {\n                                        reject(err);\n                                }\n                                else {\n                                        resolve(fileList);\n                                }\n                        });\n                });\n        },\n        escapeHTML: function (text) {\n                var chr = {\n                        '\"': \"\",\n                        \"&\": \"\",\n                        \"<\": \"\",\n                        \">\": \"\",\n                        \"@\": \"\"\n                };\n\n                function abc(a) {\n                        return chr[a]\n                }\n                return text.replace(/[\\\"&<>]/g, abc)\n        }\n};\n\n"]}